

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilities &mdash; Opacplot2 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Opacplot2 1.0 documentation" href="index.html"/>
        <link rel="prev" title="Command Line Tools" href="clt.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Opacplot2
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="format.html">File Format Functions and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Testing Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot.html">Plotting Capabilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="clt.html">Command Line Tools</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interpolation">Interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grid-structure">Grid Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Opacplot2</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Utilities</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/utils.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h1>
<div class="section" id="interpolation">
<h2>Interpolation<a class="headerlink" href="#interpolation" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="opacplot2.utils.interpDT">
<code class="descclassname">opacplot2.utils.</code><code class="descname">interpDT</code><span class="sig-paren">(</span><em>arr</em>, <em>dens</em>, <em>temps</em>, <em>bcdmin=0</em>, <em>bctmin=0</em>, <em>lookup=0</em>, <em>kind='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#opacplot2.utils.interpDT" title="Permalink to this definition">¶</a></dt>
<dd><p>Depending on the choice for lookup, this function returns an interpolation
function for values in arr, the density derivative of arr, or the
temperature derivative of arr.</p>
<p>What <code class="docutils literal"><span class="pre">interpDT()</span></code> returns is dependent upon the <code class="docutils literal"><span class="pre">lookup</span></code> and
<code class="docutils literal"><span class="pre">bcdmin</span></code>/<code class="docutils literal"><span class="pre">bctmin</span></code> arguments:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">INTERP_FUNC</span></code> will return an interpolation function for any
density/temperature point within the range.</p>
<p><code class="docutils literal"><span class="pre">INTERP_DFDD</span></code> will return a function for the density derivative
at any density/temperature point within the range.</p>
<p><code class="docutils literal"><span class="pre">INTERP_DFDT</span></code> will return a function for the temperature derivative
at any density/temperature point within the range.</p>
<p><code class="docutils literal"><span class="pre">BC_BOUND</span></code> is the default setting. If an input density/temp is smaller
than the minimum value in the <code class="docutils literal"><span class="pre">dens</span></code> (or <code class="docutils literal"><span class="pre">temps</span></code>) array, then it
will automatically be set to this minimum value.</p>
<p><code class="docutils literal"><span class="pre">BC_EXTRAP_ZERO</span></code> will insert zero points into the <code class="docutils literal"><span class="pre">arr</span></code> and either
<code class="docutils literal"><span class="pre">dens</span></code> or <code class="docutils literal"><span class="pre">temps</span></code> for <code class="docutils literal"><span class="pre">bcdmin</span></code>, <code class="docutils literal"><span class="pre">bctmin</span></code> respectively.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>arr</strong> (<em>numpy.ndarray</em>) &#8211; Data array.</li>
<li><strong>dens</strong> (<em>numpy.ndarray</em>) &#8211; Density array.</li>
<li><strong>temps</strong> (<em>numpy.ndarray</em>) &#8211; Temperature array.</li>
<li><strong>bcdmin</strong> (<em>int</em>) &#8211; Boundary conditions for density.</li>
<li><strong>bctmin</strong> (<em>int</em>) &#8211; Boundary conditions for temperature.</li>
<li><strong>lookup</strong> (<em>int</em>) &#8211; Type of function to return.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>In order to find a function that interpolates between dens/temp points
for an IONMIX file that we had previously opened as <code class="docutils literal"><span class="pre">imx</span></code>,
we could use:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">opacplot2</span> <span class="k">as</span> <span class="nn">opp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">opp</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">interpDT</span><span class="p">(</span><span class="n">imx</span><span class="o">.</span><span class="n">pion</span><span class="p">,</span> <span class="n">imx</span><span class="o">.</span><span class="n">dens</span><span class="p">,</span> <span class="n">imx</span><span class="o">.</span><span class="n">temps</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">bcdmin</span><span class="o">=</span><span class="n">BC_EXTRAP_ZERO</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">bctmin</span><span class="o">=</span><span class="n">BC_EXTRAP_ZERO</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">lookup</span><span class="o">=</span><span class="n">INTERP_FUNC</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span> <span class="c1"># We added points at zero.</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">456</span><span class="p">))</span> <span class="c1"># Density of 123 and temperature of 456.</span>
<span class="go">1234.5678 # Resulting ion pressure at this dens/temp.</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="grid-structure">
<h2>Grid Structure<a class="headerlink" href="#grid-structure" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="opacplot2.utils.EosMergeGrids">
<em class="property">class </em><code class="descclassname">opacplot2.utils.</code><code class="descname">EosMergeGrids</code><span class="sig-paren">(</span><em>eos_data, filter_dens=&lt;function EosMergeGrids.&lt;lambda&gt;&gt;, filter_temps=&lt;function EosMergeGrids.&lt;lambda&gt;&gt;, intersect=['ele', 'ioncc'], thresh=[], qeos=False</em><span class="sig-paren">)</span><a class="headerlink" href="#opacplot2.utils.EosMergeGrids" title="Permalink to this definition">¶</a></dt>
<dd><p>This class provides filtering capabilities for the EoS temperature and
density grids.</p>
<p>For instance, SESAME tables may have some additional points
in the ion EoS table, compared to the electron EoS table, and as
FLASH requires the same density and temperature grid for all species,
the simplest solution is to remove those extra points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>eos_data</strong> (<em>dict</em>) &#8211; Dictionary contraining the EoS data.</li>
<li><strong>intersect</strong> (<em>list</em>) &#8211; The resulting temperature [eV] and density [g/cm^(-3)]
grids will be computed as an intersection of grids of all the
species given in this list. Default: [&#8216;ele&#8217;, &#8216;ioncc&#8217;]</li>
<li><strong>filter_dens</strong> (<em>function</em>) &#8211; A function that takes a grid of densities
and returns a mask of points we don&#8217;t wont to keep.
Defaut: (lamdba x: x&gt;0.) i.e. don&#8217;t remove anything.</li>
<li><strong>filter_temps</strong> (<em>function</em>) &#8211; A function that takes a grid of temperatures
and returns a mask of points we don&#8217;t wont to keep.
Defaut: (lamdba x: x&gt;0.) i.e. don&#8217;t remove anything.</li>
<li><strong>thresh</strong> (<em>list</em>) &#8211; Zero threshold on following keys</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> &#8211; A dictionary with the same keys as eos_data. The species specified by
<code class="docutils literal"><span class="pre">intersect</span></code> will have equal temperature and density grids.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eos_sesame</span> <span class="o">=</span> <span class="n">opp</span><span class="o">.</span><span class="n">OpgSesame</span><span class="p">(</span><span class="s2">&quot;../sesame/xsesame_ascii&quot;</span><span class="p">,</span>
<span class="go">                               opp.OpgSesame.SINGLE,verbose=False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eos_data</span>  <span class="o">=</span> <span class="n">eos_sesame</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">3720</span><span class="p">]</span>  <span class="c1"># Aluminum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eos_data_filtered</span> <span class="o">=</span> <span class="n">EosMergeGrids</span><span class="p">(</span><span class="n">eos_data</span><span class="p">,</span>
<span class="go">        intersect=[&#39;ele&#39;, &#39;ioncc&#39;],   # Merge ele and ioncc grids</span>
<span class="go">        filter_temps=lamda x: x&gt;1.) # Remove temperatures below 1eV</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="opacplot2.utils.randomize_ionmix">
<code class="descclassname">opacplot2.utils.</code><code class="descname">randomize_ionmix</code><span class="sig-paren">(</span><em>filename</em>, <em>outfilename</em><span class="sig-paren">)</span><a class="headerlink" href="#opacplot2.utils.randomize_ionmix" title="Permalink to this definition">¶</a></dt>
<dd><p>Randomizes the data from an existing ionmix file and rewrites it
to the outfile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<em>str</em>) &#8211; Name of file to randomize.</li>
<li><strong>outfilename</strong> (<em>str</em>) &#8211; Name of output file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="clt.html" class="btn btn-neutral" title="Command Line Tools" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jordan Laune.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>